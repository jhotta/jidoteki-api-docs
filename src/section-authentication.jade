.method-section
  .method-description

    h1#authentication Authentication
    p Authenticating to the Jidoteki API is a 2-step process.
    p.
      First you must generate
      an HMAC signature for each request, then you must obtain an access token.
    p Each subsequent API request must contain your access token and HMAC signature.

.method-section
  .method-description

    h1#authentication_step1 Step 1/2: Generating an HMAC signature
    p Each API request must be accompanied by a signature.
    p.
      To create a signature, you must concatenate the
      <code>request method</code> and
      <code>request url</code>, then sign
      the request using your <code>api key</code> and the HMAC-SHA256 algorithm.
    p The output is an SHA256 hash (signature) which you'll use to obtain an access token.

  .method-example
    h3 HMAC Signature
    pre(class="prettyprint lang-curl bash").
      REQUEST METHOD: GET
      REQUEST URL: https://api.beta.jidoteki.com/v0/auth/user
      API KEY: 96f1ad9d9407ebdf3603ca6b45ccd89
      STRING TO SIGN: 'GEThttps://api.beta.jidoteki.com/v0/auth/user'

    pre(class="prettyprint lang-curl bash").
      $ echo -n \
        'GEThttps://api.beta.jidoteki.com/v0/auth/user' | \
        openssl dgst -sha256 \
        -hmac '96f1ad9d9407ebdf3603ca6b45ccd89'

    h3.method-response
    pre(class="prettyprint lang-curl json") e5d2a9353119617d34f8167138d8b7bb4fb0799c2abb0c1388a6ca9dc3a9eb12

.method-section
  .method-description

    h1#authentication_step2 Step 2/2: Obtaining an access token
    p.
      You must obtain a temporary access token prior to making any other API requests.
      The token expires after 8 hours, but can be revoked at any time.
    p To request a token, you must send your UID and HMAC Signature as HTTP Headers.
    table
      caption Header Parameters
      thead
        tr
          th Name
          th Validation
      tbody
        tr
          td X-Auth-UID
          td
            code.required required
            br
            | The UID must be exactly 7 characters and alphanumeric.
            br
            strong Example: 
            code aecd580
        tr
          td X-Auth-Signature
          td
            code.required required
            br
            | The HMAC Signature must be exactly 64 characters and alphanumeric.
            br
            strong Example: 
            code e5d2a9353119617d34f8167138d8b7bb4fb0799c2abb0c1388a6ca9dc3a9eb12
        tr
          td User-Agent
          td
            code.optional optional
            br
            | If supplied, the User-Agent must be less than 128 characters, 
            | can contain any alphanumeric characters, and some special characters.
            br
            strong Accepted characters: 
            code _-.#/()@,;
            br
            strong Example: 
            code curl/7.21.4 (macbook air @ home)

  .method-example
    h3.method-definition
    pre(class="prettyprint lang-curl bash")
      | GET https://beta.jidoteki.com/v0/auth/user

    h3.method-request
    pre(class="prettyprint lang-curl bash").
      $ curl -X GET https://api.beta.jidoteki.com/v0/auth/user \
      --header "X-Auth-UID: aecd580" -H "X-Auth-Signature: \
      e5d2a9353119617d34f8167138d8b7bb4fb0799c2abb0c1388a6ca9dc3a9eb12" \
      --user-agent "curl/7.21.4 (macbook air @ home)"

    h3.method-response
    pre(class="prettyprint lang-curl json").
      {"success":
        {
          "message": "Authentication successful",
          "access_token": "2e0a696ea8746b5daa6e5a6cbb841a34ef7f9090ac2acf5ae2bc87311903ad23"
        }
      }
